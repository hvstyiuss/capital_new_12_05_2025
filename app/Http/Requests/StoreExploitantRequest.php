<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;

class StoreExploitantRequest extends FormRequest
{
    /**
     * Determine if the user is authorized to make this request.
     */
    public function authorize(): bool
    {
        return true;
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array<mixed>|string>
     */
    public function rules(): array
    {
        return [
            'categorie' => ['required', 'in:societe,personne_physique'],
            'numero' => ['nullable', 'string', 'max:255'],
            'nom_complet' => ['nullable', 'string', 'max:255'],
            'n_cin' => ['required', 'string', 'max:255', 'unique:exploitants,n_cin'],
            'raison_sociale' => ['nullable', 'string', 'max:255'],
            'activite' => ['required', 'in:BI,BP,PAM'],
            'adresse' => ['nullable', 'string'],
            'qualification_rc' => ['nullable', 'string', 'max:255'],
            'date_obtention' => ['nullable', 'date'],
            'duree_validite' => ['nullable', 'string', 'max:255'],
            'etat_validite' => ['nullable', 'string', 'max:255'],
            'situation_administrative' => ['nullable', 'string', 'max:255'],
            'exclusion' => ['boolean'],
            'duree_exclusion' => ['nullable', 'string', 'max:255'],
            'infractions_commises' => ['nullable', 'string'],
            'is_deleted' => ['boolean'],
        ];
    }

    /**
     * Get custom messages for validator errors.
     *
     * @return array<string, string>
     */
    public function messages(): array
    {
        return [
            'categorie.required' => 'La catégorie est requise.',
            'categorie.in' => 'La catégorie doit être "societe" ou "personne_physique".',
            'numero.string' => 'Le numéro doit être une chaîne de caractères.',
            'numero.max' => 'Le numéro ne peut pas dépasser 255 caractères.',
            'nom_complet.string' => 'Le nom complet doit être une chaîne de caractères.',
            'nom_complet.max' => 'Le nom complet ne peut pas dépasser 255 caractères.',
            'n_cin.required' => 'Le numéro CIN est requis.',
            'n_cin.string' => 'Le numéro CIN doit être une chaîne de caractères.',
            'n_cin.max' => 'Le numéro CIN ne peut pas dépasser 255 caractères.',
            'n_cin.unique' => 'Ce numéro CIN est déjà utilisé.',
            'raison_sociale.string' => 'La raison sociale doit être une chaîne de caractères.',
            'raison_sociale.max' => 'La raison sociale ne peut pas dépasser 255 caractères.',
            'activite.required' => 'L\'activité est requise.',
            'activite.in' => 'L\'activité doit être "BI", "BP" ou "PAM".',
            'adresse.string' => 'L\'adresse doit être une chaîne de caractères.',
            'qualification_rc.string' => 'La qualification RC doit être une chaîne de caractères.',
            'qualification_rc.max' => 'La qualification RC ne peut pas dépasser 255 caractères.',
            'date_obtention.date' => 'La date d\'obtention doit être une date valide.',
            'duree_validite.string' => 'La durée de validité doit être une chaîne de caractères.',
            'duree_validite.max' => 'La durée de validité ne peut pas dépasser 255 caractères.',
            'etat_validite.string' => 'L\'état de validité doit être une chaîne de caractères.',
            'etat_validite.max' => 'L\'état de validité ne peut pas dépasser 255 caractères.',
            'situation_administrative.string' => 'La situation administrative doit être une chaîne de caractères.',
            'situation_administrative.max' => 'La situation administrative ne peut pas dépasser 255 caractères.',
            'exclusion.boolean' => 'L\'exclusion doit être un booléen.',
            'duree_exclusion.string' => 'La durée d\'exclusion doit être une chaîne de caractères.',
            'duree_exclusion.max' => 'La durée d\'exclusion ne peut pas dépasser 255 caractères.',
            'infractions_commises.string' => 'Les infractions commises doivent être une chaîne de caractères.',
            'is_deleted.boolean' => 'Le statut de suppression doit être un booléen.',
        ];
    }
}
