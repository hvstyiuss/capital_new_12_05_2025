<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;

class IndexExploitantRequest extends FormRequest
{
    /**
     * Determine if the user is authorized to make this request.
     */
    public function authorize(): bool
    {
        return true;
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array<mixed>|string>
     */
    public function rules(): array
    {
        return [
            'numero' => ['nullable', 'string', 'max:255'],
            'nom_complet' => ['nullable', 'string', 'max:255'],
            'n_cin' => ['nullable', 'string', 'max:255'],
            'categorie' => ['nullable', 'in:societe,personne_physique'],
            'raison_sociale' => ['nullable', 'string', 'max:255'],
            'activite' => ['nullable', 'in:BI,BP,PAM'],
            'adjudicataire' => ['nullable', 'string', 'max:255'],
            'qualification_rc' => ['nullable', 'string', 'max:255'],
            'exclusion' => ['nullable', 'boolean'],
            'is_deleted' => ['nullable', 'boolean'],
            'date_from' => ['nullable', 'date'],
            'date_to' => ['nullable', 'date'],
            'sort' => ['nullable', 'string', 'in:numero,nom_complet,n_cin,categorie,activite,date_obtention,created_at,updated_at'],
            'direction' => ['nullable', 'string', 'in:asc,desc'],
            'per_page' => ['nullable', 'integer', 'in:10,15,25,50,100'],
        ];
    }

    /**
     * Get custom messages for validator errors.
     *
     * @return array<string, string>
     */
    public function messages(): array
    {
        return [
            'numero.string' => 'Le numéro doit être une chaîne de caractères.',
            'numero.max' => 'Le numéro ne peut pas dépasser 255 caractères.',
            'nom_complet.string' => 'Le nom complet doit être une chaîne de caractères.',
            'nom_complet.max' => 'Le nom complet ne peut pas dépasser 255 caractères.',
            'n_cin.string' => 'Le numéro CIN doit être une chaîne de caractères.',
            'n_cin.max' => 'Le numéro CIN ne peut pas dépasser 255 caractères.',
            'categorie.in' => 'La catégorie doit être "societe" ou "personne_physique".',
            'raison_sociale.string' => 'La raison sociale doit être une chaîne de caractères.',
            'raison_sociale.max' => 'La raison sociale ne peut pas dépasser 255 caractères.',
            'activite.in' => 'L\'activité doit être "BI", "BP" ou "PAM".',
            'adjudicataire.string' => 'L\'adjudicataire doit être une chaîne de caractères.',
            'adjudicataire.max' => 'L\'adjudicataire ne peut pas dépasser 255 caractères.',
            'qualification_rc.string' => 'La qualification RC doit être une chaîne de caractères.',
            'qualification_rc.max' => 'La qualification RC ne peut pas dépasser 255 caractères.',
            'exclusion.boolean' => 'L\'exclusion doit être un booléen.',
            'is_deleted.boolean' => 'Le statut de suppression doit être un booléen.',
            'sort.in' => 'Le tri doit être un champ valide.',
            'direction.in' => 'La direction doit être "asc" ou "desc".',
            'per_page.in' => 'Le nombre par page doit être une valeur valide.',
            'date_from.date' => 'La date de début doit être une date valide.',
            'date_to.date' => 'La date de fin doit être une date valide.',
        ];
    }
}
